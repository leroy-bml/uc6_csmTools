% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/identify_exp_design.R
\name{identify_exp_attributes}
\alias{identify_exp_attributes}
\title{Identify Experimental Attribute Columns and Join Keys in a Database}
\usage{
identify_exp_attributes(db, str_cols = NULL)
}
\arguments{
\item{db}{A list of data frames representing the database.}

\item{str_cols}{Optional character vector of additional columns to consider as structural/join keys.}
}
\value{
A list of data frames (the database) with non-join attribute columns renamed to include their table name as a prefix. The list has the following attributes:
\item{primary_keys}{A list of primary key columns for each table.}
\item{join_keys}{A list of join key columns for each table.}
\item{attributes}{A list of non-join attribute columns for each table.}
}
\description{
Identifies and annotates attribute columns and join keys across all tables in a database.
The function renames non-join attribute columns to include their table name as a prefix, and attaches lists of primary keys, join keys, and attribute columns as attributes to the output.
}
\details{
The function:
\itemize{
\item Gathers all column names across tables.
\item Identifies date columns using \code{is_date}.
\item Identifies primary keys using \code{get_pkeys}.
\item Determines join keys as columns that are primary keys or in \code{str_cols}, but not date columns, and that appear in more than one table.
\item Renames non-join attribute columns to include their table name as a prefix.
\item Attaches lists of primary keys, join keys, and attribute columns as attributes to the output.
}
}
\examples{
# Example usage (assuming is_date and get_pkeys are defined):
# db <- list(
#   plots = data.frame(PlotID = 1:4, Area = c(10, 12, 11, 13)),
#   treatments = data.frame(TreatmentID = 1:2, Name = c("A", "B"))
# )
# identify_exp_attributes(db)

}
