% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/structure_metadata.R
\name{split_dataset}
\alias{split_dataset}
\title{Split a Dataset by a Key Column}
\usage{
split_dataset(
  dataset,
  key,
  data_model,
  config_path = "./inst/extdata/datamodels.yaml"
)
}
\arguments{
\item{dataset}{The dataset to split, as a list of data frames.}

\item{key}{The conceptual name of the key to split by (e.g., "experiment", "year"). This is resolved to a specific
column name via the config file.}

\item{data_model}{The data model of the dataset.}

\item{config_path}{The path to the \code{datamodels.yaml} file.}
}
\value{
A named list of lists, where each top-level element is named after a unique value of the split key
}
\description{
Splits a dataset (a list of data frames) into a nested list, where each sub-list corresponds to a unique value
of a specified key column.
}
\details{
This function is used to split a multi-experiment or multi-year dataset into individual subsets.
For tables that do not contain the \code{split_key}, the entire table is replicated across all subsets
(e.g., a single \code{SOIL} table would be copied into each experiment's subset). The function also cleans the output by
removing empty data frames and columns containing only \code{NA} values.
}
