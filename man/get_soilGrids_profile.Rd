% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_soil_data.R
\name{get_soilGrids_profile}
\alias{get_soilGrids_profile}
\title{Retrieve and Map a SoilGrids Profile for a Given Location}
\usage{
get_soilGrids_profile(lat, lon, dir = tempdir())
}
\arguments{
\item{lat}{Numeric. Latitude of the target location.}

\item{lon}{Numeric. Longitude of the target location.}

\item{dir}{Character. Directory in which to store and extract the SoilGrids profiles. Defaults to a temporary directory.}
}
\value{
A list with elements \code{SOIL_METADATA}, \code{SOIL_PROFILES}, and \code{SOIL_PROFILE_LAYERS}, each as a data frame or list of data frames in ICASA format. A comment attribute is attached describing data provenance.
}
\description{
Downloads, extracts, and maps the closest SoilGrids soil profile to a specified latitude and longitude, returning the data in ICASA format.
}
\details{
The function downloads and extracts the SoilGrids by-country dataset if not already present, determines the country for the given coordinates using reverse geocoding, and loads the corresponding soil profile file. It selects the profile closest to the specified coordinates, splits the data into metadata, profile, and layer sections, and maps each section to the ICASA data model using a mapping file. The institution is set to "ISRIC" for provenance.

The function uses \code{get_soilGrids_dataverse}, \code{reverse_geocode}, \code{read_sol}, \code{map_data}, and \code{load_map} for data retrieval and transformation.
}
\examples{
\dontrun{
soil_profile <- get_soilGrids_profile(lat = 40.7128, lon = -74.0060)
str(soil_profile)
}

}
