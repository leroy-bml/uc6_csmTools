% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/compile_dssat_dataset.R
\name{compile_dssat_dataset}
\alias{compile_dssat_dataset}
\title{Compile, parameterize, and write a DSSAT dataset}
\usage{
compile_dssat_dataset(
  dataset,
  write = FALSE,
  sol_append = TRUE,
  write_in_dssat_dir = TRUE,
  path = getwd(),
  control_args = list()
)
}
\arguments{
\item{dataset}{A named list of raw DSSAT data. Expected names correspond to DSSAT input files:
"MANAGEMENT", "SOIL", "WEATHER", "SUMMARY", "TIME_SERIES".}

\item{write}{Logical. If \code{TRUE}, the formatted files are written to disk. Default is \code{FALSE}.}

\item{sol_append}{Logical. If \code{TRUE}, the formatted soil data is appended to the target
\verb{*.SOL} file. If \code{FALSE}, it overwrites the target \verb{*.SOL} file. Default is \code{TRUE}.}

\item{write_in_dssat_dir}{Logical. If \code{TRUE}, each fileis  written to the adequate standard DSSAT
subdirectories. If \code{FALSE}, all files are written to the \code{path} directory.
Default is \code{TRUE}.}

\item{path}{Character. The target directory for writing files.
\strong{Only used if \code{write_in_dssat_dir = FALSE}}. Default is \code{getwd()}.}

\item{control_args}{A named list of simulation parameters to overwrite defaults in
'SIMULATION_CONTROLS' and 'TREATMENTS' (e.g., \code{list(SDATE = "23001", R = 1)}).}
}
\value{
A named list containing a simulation-ready, formatted, and parameterized DSSAT dataset.
The list names will be \code{"MANAGEMENT"}, \code{"SOIL"},
\code{"WEATHER"}, \code{"SUMMARY"}, and \code{"TIME_SERIES"}.
}
\description{
Prepares a DSSAT dataset for a model run:
\enumerate{
\item Formats all raw data sections (MANAGEMENT, SOIL, WEATHER, etc.).
\item Applies simulation control parameters.
\item Optionally writes all files to their correct locations.
}
}
\details{
This function is a high-level wrapper that calls several internal helpers in sequence:
\enumerate{
\item \code{build_dssat_dataset} formats all raw data sections.
\item \code{set_dssat_controls} modifies the \code{MANAGEMENT} section
with parameters from \code{control_args}.
\item If \code{write = TRUE}, \code{prepare_dssat_paths} resolves all
output file paths, and \code{write_dssat_dataset} writes the files to disk.
}
}
\examples{
\dontrun{
# Assuming 'my_raw_dataset' is a list of raw data

# Just format and parameterize (here, set start date and random seed), without writing
formatted_data <- compile_dssat_dataset(
  my_raw_dataset,
  control_args = list(RSEED = 1234, SDATE = "23001")
)

# Format, parameterize, and write to a custom local directory
compile_dssat_dataset(
  my_raw_dataset,
  write = TRUE,
  write_in_dssat_dir = FALSE,
  path = "./model_run_1",
  sol_append = FALSE
)

# Format, parameterize, and write to standard DSSAT directories
compile_dssat_dataset(
  my_raw_dataset,
  control_args = list(RSEED = 1234, SDATE = "23001"),
  write = TRUE,
  write_in_dssat_dir = TRUE
)
}

}
