% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/reshape_exp_data.R
\name{melt_dataset}
\alias{melt_dataset}
\title{Iteratively Merge Leaf Tables into a Database Backbone}
\usage{
melt_dataset(db, drop_keys = FALSE, exclude_tbls = NULL, exclude_cols = NULL)
}
\arguments{
\item{db}{A named list of data frames representing the database.}

\item{drop_keys}{Logical. If \code{TRUE}, drops the join key columns after merging (default: \code{FALSE}).}

\item{exclude_tbls}{Optional character vector of table names to exclude from merging as leaves.}

\item{exclude_cols}{Optional character vector of column names to exclude from being used as join keys.}
}
\value{
A list of data frames representing the melted (fully merged) database.
}
\description{
Iteratively merges "leaf" tables (those without parents) into their parent tables in a database,
using primary keys and the \code{\link{merge_tbls}} function. The process continues until no mergeable leaves remain.
}
\details{
The function:
\itemize{
\item Identifies leaf tables (those with no parent in the database).
\item Merges mergeable leaves into their parent tables using \code{\link{merge_tbls}}.
\item Repeats the process until no mergeable leaves remain.
\item Optionally drops join key columns after merging.
\item Removes the \code{flag} column from tables if all values are \code{NA}.
}
}
\examples{
# Example usage (assuming get_pkeys, get_parent, and merge_tbls are defined):
# db <- list(
#   parent = data.frame(ID = 1:3, Value = c("A", "B", "C")),
#   child = data.frame(ID = 1:3, Data = c("X", "Y", "Z"))
# )
# melt_dataset(db)

}
