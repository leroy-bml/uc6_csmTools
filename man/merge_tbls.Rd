% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/merge_tbls.R
\name{merge_tbls}
\alias{merge_tbls}
\title{Merge Parent and Child Tables by Common Keys}
\usage{
merge_tbls(
  parent_list,
  child_list,
  type = c("parent-child", "child-parent", "bidirectional"),
  drop_keys = TRUE,
  suffixes = c("-x", "-y"),
  exclude_cols = NULL
)
}
\arguments{
\item{parent_list}{A named list of parent data frames.}

\item{child_list}{A named list of child data frames.}

\item{type}{Character. The type of relationship to use for merging: \code{"parent-child"}, \code{"child-parent"}, or \code{"bidirectional"} (default: all).}

\item{drop_keys}{Logical. If \code{TRUE}, drops the join key columns after merging (default: \code{TRUE}).}

\item{suffixes}{Character vector of length 2. Suffixes to append to duplicate column names (default: \code{c("-x", "-y")}).}

\item{exclude_cols}{Optional character vector of column names to exclude from being used as join keys.}
}
\value{
A list with two elements:
\item{db}{A named list of merged parent data frames, each with an attribute \code{join_tbls} listing the child tables merged into it.}
\item{merged_leaves}{A character vector of names of child tables that were merged.}
}
\description{
Merges lists of parent and child data frames by their common columns (primary keys or otherwise), according to the specified relationship type.
Handles duplicate columns by fusing identical columns and flags inconsistencies. Returns the merged tables and a record of merged child tables.
}
\details{
The function:
\itemize{
\item Identifies common columns between parent and child tables according to the specified relationship type.
\item Merges tables by these columns, optionally excluding specified columns.
\item Fuses identical columns and flags inconsistencies using \code{\link{fuse_identical_columns}}.
\item Optionally drops join key columns after merging.
\item Records which child tables were merged into each parent.
}
}
\examples{
# Example usage (assuming get_pkeys and fuse_identical_columns are defined):
# parent_list <- list(
#   parent = data.frame(ID = 1:3, Value = c("A", "B", "C"))
# )
# child_list <- list(
#   child = data.frame(ID = 1:3, Data = c("X", "Y", "Z"))
# )
# merge_tbls(parent_list, child_list, type = "parent-child")

}
