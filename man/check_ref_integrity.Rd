% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/merge_tbls.R
\name{check_ref_integrity}
\alias{check_ref_integrity}
\title{Check Referential Integrity Between Parent and Child Data Frames}
\usage{
check_ref_integrity(parent_df, child_df, cols)
}
\arguments{
\item{parent_df}{A data frame considered as the "parent" table. It should contain
the primary or unique keys that the child table references.}

\item{child_df}{A data frame considered as the "child" table. It should contain
foreign keys that reference the parent table.}

\item{cols}{A character vector specifying the names of the common columns (keys)
to check for referential integrity. These columns must exist in both
\code{parent_df} and \code{child_df}.}
}
\value{
A logical vector of the same length as \code{cols}. Each element is \code{TRUE} if
all unique, non-NA values in the corresponding column of \code{child_df} are
present in the unique, non-NA values of the same column in \code{parent_df}.
Returns \code{logical(0)} if \code{cols} is empty.
}
\description{
This function checks if referential integrity holds for specified common columns
between a parent data frame and a child data frame. Referential integrity means
that all values in the specified columns of the child data frame exist in the
corresponding columns of the parent data frame.
}
\details{
The check is performed for each column specified in \code{cols} independently.
For a given column:
\itemize{
\item It extracts unique, non-NA values from that column in both \code{parent_df} and \code{child_df}.
\item It then verifies if every unique value from the child's column is present within
the unique values of the parent's column.
\item This is a one-way check: it does not verify if all parent values are present in the child,
nor does it check for orphaned parent records. It strictly checks if child records
have a corresponding parent record.
}
}
\examples{
# Example 1: Basic referential integrity check
parent_data <- data.frame(
  CustomerID = c(101, 102, 103, 104),
  Name = c("Alice", "Bob", "Charlie", "David")
)

child_data <- data.frame(
  OrderID = c(1, 2, 3, 4),
  CustomerID = c(101, 103, 101, 102),
  Amount = c(50, 75, 120, 30)
)

# Check integrity for 'CustomerID'
check_ref_integrity(parent_data, child_data, "CustomerID") # Should be TRUE

}
