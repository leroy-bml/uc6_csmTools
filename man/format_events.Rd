% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/extract_transform_template.R
\name{format_events}
\alias{format_events}
\title{Format Event Tables by Handling Non-Applied Levels in Experimental Data}
\usage{
format_events(ls, type, head_key, applied_key, applics_key)
}
\arguments{
\item{ls}{A named list of data frames, typically representing sections of an experimental template, including event headers, application tables, and the treatment matrix.}

\item{type}{Character. The name of the event header table (e.g., \code{"FERTILIZERS"}, \code{"IRRIGATIONS"}).}

\item{head_key}{Character. The name of the column in the event header table that identifies the event level (e.g., \code{"fertilizer_level"}, \code{"irrigation_level"}).}

\item{applied_key}{Character. The name of the column in the event header table indicating whether the event was applied (e.g., \code{"fert_applied"}, \code{"irrig_applied"}).}

\item{applics_key}{Character. The name of the application events table (e.g., \code{"FERTILIZER_APPLICS"}, \code{"IRRIGATION_APPLICATIONS"}).}
}
\value{
The input list with updated event header, application, and treatment tables.
}
\description{
Updates event header, application, and treatment tables in a list to handle cases where certain event levels (e.g., fertilizer or irrigation) are not applied.
}
\details{
For the specified event type, the function:
\itemize{
\item Identifies event levels that were not applied (where \code{applied_key} == "N").
\item Updates the event header table, setting the event level to 0 for non-applied levels and re-indexing levels.
\item Updates the application events and treatment matrix tables to reflect the new event level indices.
\item Removes non-applied levels from the event header and application tables.
}
The cleaned data frames replace the originals in the input list.

The function uses the \strong{dplyr} package for data manipulation.
}
\examples{
\dontrun{
ls <- format_events(ls, "FERTILIZERS", "fertilizer_level", "fert_applied", "FERTILIZER_APPLICS")
}

}
